name: ðŸŒ… Morning Glory Maintenance

on:
  schedule:
    - cron: '30 1 * * *'
  workflow_dispatch:

jobs:
  maintenance:
    name: ðŸŒ  System Tune-Up
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ” Checkout Repository
        uses: actions/checkout@v4

      - name: â¬†ï¸ Fetch Latest Updates
        run: |
          git fetch --all; git pull --verbose

      - name: ðŸŽ‰ Greet Contributors with a Fun Message
        run: |
          echo "ðŸ’¬ 'Top of the morning to ya!' â€“ Hamster ðŸ¹"
          echo "ðŸŒ» Hello, developers! It's another day to code with passion. ðŸš€"

      - name: ðŸ§¹ Background Cleanup Job with a Touch of Color
        run: |
          sudo apt update -y; sudo apt install lolcat neofetch -y
          neofetch | lolcat 
          uname -a | lolcat
          echo "ðŸ’¾ Disk Usage:"; df -T | lolcat

  greetings:
    name: ðŸŒž Morning Greetings 
    runs-on: macos-latest
    timeout-minutes: 5
    steps:
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v4

      - name: ðŸ› ï¸ Setup Date and Time
        id: date_time
        run: |
          echo "DATE=$(date '+%B %d, %Y')" >> $GITHUB_ENV
          echo "TIME=$(date '+%I:%M %p')" >> $GITHUB_ENV

      - name: ðŸŒº Write Greetings of the Day
        run: |
          cat << 'EOF' > GREETINGS.md
          # âœ¨âœ¨âœ¨ Good Morning, General! âœ¨âœ¨âœ¨

          **ðŸ“… Date:** ${{ env.DATE }}  
          **â° Time:** ${{ env.TIME }}  

          ðŸŒ… "The sun rises for those who dare to dream big."  

          ðŸ¹ Hamsterâ€™s Tip: _Make it count!_ ðŸ’ª  

          ```
          ðŸš€ Keep learning, keep improving.  
          ðŸ§‘â€ðŸ’» Every commit takes you closer to greatness!  
          ```
          
          âœ¨ *Have a Fantastic Day!* âœ¨  
          EOF

      - name: ðŸ”‘ Import GPG Key for a Secure Commit
        id: gpg
        uses: crazy-max/ghaction-import-gpg@v6
        with:
          gpg_private_key: ${{ secrets.GPG_PRIVATE_KEY }}
          passphrase: ${{ secrets.GPG_PASSPHRASE }}
          git_user_signingkey: true
          git_commit_gpgsign: true
          git_config_global: true
          trust_level: 5

      - name: ðŸ•µï¸ Verify GPG Configuration
        run: |
          gpg --list-secret-keys --keyid-format LONG
          git config --global --list

      - name: ðŸš€ Commit & Push the Greeting
        run: |
          git config --local user.name "Hamster [bot]"
          git config --local user.email "TheHamsterBot@outlook.com"
          git add GREETINGS.md
          git commit -m "ðŸŒ… Morning Greeting: Rise and Shine! â˜€ï¸"
          git push
          echo GREETINGS.md >> $GITHUB_STEP_SUMMARY
        env:
          GITHUB_TOKEN: ${{ secrets.BOT_TOKEN || secrets.GITHUB_TOKEN }}
