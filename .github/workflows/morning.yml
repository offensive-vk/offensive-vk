name: ğŸŒ… Morning Glory Maintenance

on:
  schedule:
    - cron: '30 1 * * *'
  workflow_dispatch:

jobs:
  maintenance:
    name: ğŸŒ  System Tune-Up
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ” Checkout Repository
        uses: actions/checkout@v5

      - name: â¬†ï¸ Fetch Latest Updates
        run: |
          git fetch --all; git pull --verbose

      - name: ğŸ‰ Greet Contributors with a Fun Message
        run: |
          echo "ğŸ’¬ 'Top of the morning to ya!' â€“ Hamster ğŸ¹" >> $GITHUB_STEP_SUMMARY
          echo "ğŸŒ» Hello, developers! It's another day to code with passion. ğŸš€" >> $GITHUB_STEP_SUMMARY

      - name: ğŸ§¹ Background Cleanup Job with a Touch of Color
        run: |
          sudo apt update -y; sudo apt install lolcat neofetch -y
          neofetch | lolcat 
          uname -a | lolcat
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "ğŸ’¾ Disk Usage:"; df -T | lolcat >> $GITHUB_STEP_SUMMARY

  greetings:
    name: ğŸŒ Morning Greetings
    runs-on: macos-latest
    timeout-minutes: 5
    steps:
      - name: ğŸ“¥ Checkout Repository
        uses: actions/checkout@v5

      - name: ğŸ› ï¸ Setup Date and Time
        id: date_time
        run: |
          echo "DATE=$(date '+%B %d, %Y')" >> $GITHUB_ENV
          echo "TIME=$(date '+%I:%M %p')" >> $GITHUB_ENV

      - name: ğŸŒº Write Greetings of the Day
        run: |
          cat << 'EOF' > GREETINGS.md
          # âœ¨âœ¨âœ¨ Good Morning, General! âœ¨âœ¨âœ¨

          **ğŸ“… Date:** ${{ env.DATE }}  
          **â° Time:** ${{ env.TIME }}  

          ğŸŒ… "The sun rises for those who dare to dream big."  

          ğŸ¹ Hamsterâ€™s Tip: _Make it count!_ ğŸ’ª  

          ```
          ğŸš€ Keep learning, keep improving.  
          ğŸ§‘â€ğŸ’» Every commit takes you closer to greatness!  
          ```

          âœ¨ *Have a Fantastic Day!* âœ¨  
          EOF

      - name: ğŸ”‘ Import GPG Key for a Secure Commit
        id: gpg
        uses: crazy-max/ghaction-import-gpg@v6
        with:
          gpg_private_key: ${{ secrets.GPG_PRIVATE_KEY }}
          passphrase: ${{ secrets.GPG_PASSPHRASE }}
          git_user_signingkey: true
          git_commit_gpgsign: true
          git_config_global: true
          trust_level: 5

      - name: ğŸ•µï¸ Verify GPG Configuration
        run: |
          gpg --list-secret-keys --keyid-format LONG
          git config --global --list

      - name: ğŸš€ Commit & Push the Greeting
        run: |
          git config --local user.name "Hamster [bot]"
          git config --local user.email "TheHamsterBot@outlook.com"
          git add GREETINGS.md
          git commit -m "ğŸŒ… Morning Greetings: Rise and Shine! Have a Cuppa or Biscuits together! â˜€ï¸"
          git push
        env:
          GITHUB_TOKEN: ${{ secrets.BOT_TOKEN || secrets.GITHUB_TOKEN }}
